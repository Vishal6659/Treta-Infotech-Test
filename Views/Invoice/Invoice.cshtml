@model List<Invoice>

<!-- Invoice List View -->
<div class="container mt-5">
    <!-- Header and Create Button -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-primary">📋 Invoice List</h2>
        <a asp-action="Create" asp-controller="Invoice" class="btn btn-success shadow-sm">
            <i class="bi bi-plus-lg me-1"></i> New Invoice
        </a>
    </div>

    <!-- Invoice Table -->
    <div class="table-responsive shadow-sm rounded bg-white">
        <table class="table table-hover table-bordered align-middle mb-0">
            <thead class="table-primary text-center">
                <tr>
                    <th>Invoice Number</th>
                    <th>Description</th>
                    <th>Amount Paid</th>
                    <th style="width: 180px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var inv in Model)
                    {
                        <tr class="text-center">
                            <td class="fw-semibold">@inv.InvoiceNumber</td>
                            <td>@inv.Description</td>
                            <td>
                                <span class="badge bg-success fs-6">
                                    ₹@inv.AmountPaid.ToString("N2")
                                </span>
                            </td>
                            <td>
                                <!-- View Invoice Modal Trigger -->
                                <button class="btn btn-sm btn-outline-secondary me-2"
                                        onclick="showInvoiceModal(@inv.Id)">
                                    <i class="bi bi-eye"></i> View
                                </button>

                                <!-- Edit Invoice Link -->
                                <a asp-action="Edit" asp-controller="Invoice" asp-route-id="@inv.Id" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-pencil"></i> Edit
                                </a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <!-- Fallback when no data exists -->
                    <tr>
                        <td colspan="4" class="text-center text-muted">No invoices found.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<!-- Invoice Detail Modal -->
<div class="modal fade" id="invoiceModal" tabindex="-1" aria-labelledby="invoiceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content shadow">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="invoiceModalLabel">Invoice Details</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <!-- Basic Invoice Info -->
                <div class="row g-3">
                    <div class="col-md-6"><strong>Invoice #:</strong> <span id="invNumber"></span></div>
                    <div class="col-md-6"><strong>Customer:</strong> <span id="customerName"></span></div>
                    <div class="col-md-6"><strong>Vendor:</strong> <span id="vendorName"></span></div>
                    <div class="col-md-6"><strong>Invoice Date:</strong> <span id="invoiceDate"></span></div>
                    <div class="col-md-6"><strong>Due Date:</strong> <span id="dueDate"></span></div>
                    <div class="col-md-6"><strong>Amount Paid:</strong> ₹<span id="amountPaid" class="fw-bold"></span></div>
                </div>

                <hr class="my-4" />

                <!-- Itemized Details -->
                <h6 class="fw-bold mb-3">Items</h6>
                <div class="table-responsive">
                    <table class="table table-sm table-bordered text-center">
                        <thead class="table-light">
                            <tr>
                                <th>Description</th>
                                <th>Unit Price</th>
                                <th>Quantity</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="itemTableBodyModal"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="~/js/invoice.js"></script>